# Demo code for the January PAUG meetup

This repo holds a simple compiler plugin example for the [PAUG meetup at amo](https://www.meetup.com/android-paris/events/312736139/).

It aims to implement a very (very) stripped down version of the Metro DI framework:

```kotlin
@DependencyGraph
interface PaugGraph {
  val pizza: Pizza
}

@Inject
class Mozzarella {
  override fun toString() = "de l'excellente mozzarella"
}

@Inject
class Pizza(val mozzarella: Mozzarella) {
  override fun toString() = "Une bonne pizza avec $mozzarella \uD83C\uDF55"
}

fun main() {
  /**
   * Impl is generated by the compiler plugin here
   */
  val graph: PaugGraph = PaugGraph.Impl()

  println(graph.pizza)
}
```
See full usage in [main.kt](https://github.com/martinbonnin/january-meetup/blob/final/sample-app/src/main/kotlin/sample/main.kt). You can click on the "play" button in the gutter to see the plugin in action. 

This repo serves no practical purpose besides education and showing the main parts of building and developing a plugin:

* [Companion Gradle plugin](https://github.com/martinbonnin/january-meetup/blob/final/gradle-plugin/src/main/kotlin/paug/january/gradle/PaugGradlePlugin.kt)
* [Plugin registrar](https://github.com/martinbonnin/january-meetup/blob/final/compiler-plugin/src/main/kotlin/paug/january/compiler/PaugCompilerPluginRegistrar.kt)
* [FIR extensions](https://github.com/martinbonnin/january-meetup/blob/final/compiler-plugin/src/main/kotlin/paug/january/compiler/fir/PaugFirExtensionRegistrar.kt)
* [IR extensions](https://github.com/martinbonnin/january-meetup/blob/final/compiler-plugin/src/main/kotlin/paug/january/compiler/ir/PaugIrGenerationExtension.kt)



